import n from"fs";import e from"fast-glob";import p from"critters";const c=async i=>{const s=new p(i);await f(`${i.path}**/*.html`,async t=>await s.process(t))},f=async(i,s=async o=>o,t=async o=>await n.promises.readFile(o,"utf-8"))=>{const o=await e(i);for(const r of o)try{const a=await s(await t(r));if(!a)continue;await n.promises.writeFile(r,a,"utf-8")}catch{console.log("Error: Cannot inline file "+r+" CSS!")}};function l(i={}){var o;const t=Object.assign({path:"./dist/",preload:"swap-high",inlineFonts:!0,compress:!0},i);return t.path=(o=t.path)!=null&&o.endsWith("/")?t.path:`${t.path}/`,{name:"astro-critters",hooks:{"astro:config:done":async r=>{t.path=t.path?t.path:r.config.outDir.toString()},"astro:build:done":async()=>{await c(t)}}}}export{l as default};
