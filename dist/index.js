import m from"fs";import c from"critters";function h(r={}){var i;const t=Object.assign({path:"./dist/",preload:"body",inlineFonts:!0,compress:!0},r||{});t.path=(i=t.path)!=null&&i.endsWith("/")?t.path:`${t.path}/`;const e=new c(t);return{name:"astro-critters",hooks:{"astro:build:done":async({pages:a})=>{const p=a.map(o=>{const n=o.pathname.endsWith("/")?o.pathname:o.pathname+"/",s=n==="404/"?"404.html":`${n}index.html`;return t.path+s});for(const o of p){const n=await e.readFile(o),s=await e.process(n);await m.promises.writeFile(o,s,"utf-8")}}}}}export{h as default};
