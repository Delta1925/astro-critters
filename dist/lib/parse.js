import m from"fast-glob";import*as s from"fs";var d=async(r,a=2,l="",o,c=async i=>i,p=async i=>await s.promises.readFile(i,"utf-8"))=>{const i=await m(r),e={files:0,total:0};let n=new Set;if(typeof o<"u")if(o instanceof Array||o instanceof Set)for(const f of o)n.add(f);else n.add(o);for(const f of n){if(typeof f=="string")for(const t of i)t.match(f)&&i.splice(i.indexOf(t),1);if(typeof f=="function")for(const t of i)f(t)&&i.splice(i.indexOf(t),1)}for(const f of i)try{const t=await c(await p(f));if(!t)continue;await s.promises.writeFile(f,t,"utf-8"),e.files++}catch{console.log(`Error: Cannot inline file ${f}!`)}a>0&&e.files>0&&console.info(`\x1B[32mSuccessfully inlined a total of ${e.files} ${l.toUpperCase()} ${e.files===1?"file":"files"}.\x1B[39m`)};export{d as default};
