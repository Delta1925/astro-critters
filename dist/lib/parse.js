import d from"fast-glob";import s from"fs";var u=async(r,l=2,a="",e,c=async i=>i,p=async i=>await s.promises.readFile(i,"utf-8"))=>{const i=await d(r),o={files:0,total:0};let n=new Set;if(typeof e<"u")if(e instanceof Array)for(const f of e)n.add(f);else n.add(e);for(const f of n){if(typeof f=="string")for(const t of i)t.match(f)&&i.splice(i.indexOf(t),1);if(typeof f=="function")for(const t of i)f(t)&&i.splice(i.indexOf(t),1)}for(const f of i)try{const t=await c(await p(f));if(!t)continue;await s.promises.writeFile(f,t,"utf-8"),o.files++}catch{console.log(`Error: Cannot inline file ${f}!`)}l>0&&o.files>0&&console.info(`\x1B[32mSuccessfully inlined a total of ${o.files} ${a.toUpperCase()} ${o.files===1?"file":"files"}.\x1B[39m`)};export{u as default};
