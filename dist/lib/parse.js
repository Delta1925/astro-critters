import d from"fast-glob";import*as n from"fs";var y=async(r,a=2,l="",e,c=async i=>i,p=async i=>await n.promises.readFile(i,"utf-8"))=>{const i=await d(r),o={files:0,total:0};let s=new Set;if(typeof e<"u")if(e instanceof Array)for(const f of e)s.add(f);else s.add(e);for(const f of s){if(typeof f=="string")for(const t of i)t.match(f)&&i.splice(i.indexOf(t),1);if(typeof f=="function")for(const t of i)f(t)&&i.splice(i.indexOf(t),1)}for(const f of i)try{const t=await c(await p(f));if(!t)continue;await n.promises.writeFile(f,t,"utf-8"),o.files++}catch{console.log(`Error: Cannot inline file ${f}!`)}a>0&&o.files>0&&console.info(`\x1B[32mSuccessfully inlined a total of ${o.files} ${l.toUpperCase()} ${o.files===1?"file":"files"}.\x1B[39m`)};export{y as default};
