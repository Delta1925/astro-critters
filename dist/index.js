import m from"fs";import c from"critters";function h(a={}){var e;const t=Object.assign({path:"./dist/"},a||{});t.path=(e=t.path)!=null&&e.endsWith("/")?t.path:`${t.path}/`;const i=new c(t);return{name:"astro-critters",hooks:{"astro:build:done":async({pages:r})=>{const p=r.map(o=>{const n=o.pathname.endsWith("/")?o.pathname:o.pathname+"/",s=n==="404/"?"404.html":`${n}index.html`;return t.path+s});for(const o of p){const n=await i.readFile(o),s=await i.process(n);await m.promises.writeFile(o,s,"utf-8")}}}}}export{h as default};
